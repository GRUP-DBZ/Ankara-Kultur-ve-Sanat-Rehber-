{% extends "events/base.html" %}

{% block title %}Ana Sayfa | Etkinlik Bul{% endblock %}

{% block content %}
    <!-- HERO + ARAMA ALANI -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-xl-10">
                    <div class="p-4 p-md-5 bg-white rounded-4 shadow-sm">
                        <h1 class="display-6 fw-bold mb-3">
                            Şehrindeki en iyi etkinlikleri keşfet
                        </h1>
                        <p class="lead mb-4">
                            Tiyatro, sinema, müzik, stand up ve daha fazlası için hemen arama yap.
                        </p>

                        <!-- Arama Formu -->
                        <form method="get" action="{% url 'home' %}">
                            <div class="row g-2 g-md-3">
                                <!-- Anahtar kelime -->
                                <div class="col-md-4">
                                    <label for="keyword" class="form-label small text-muted mb-1">Anahtar Kelime</label>
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="keyword"
                                        name="q"
                                        placeholder="Etkinlik, sanatçı, mekan..."
                                        value="{{ request.GET.q|default:'' }}"
                                    >
                                </div>

                                <!-- Şehir -->
                                <div class="col-md-4">
                                    <label for="city" class="form-label small text-muted mb-1">Şehir</label>
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="city"
                                        name="city"
                                        placeholder="İstanbul, Ankara..."
                                        value="{{ request.GET.city|default:'' }}"
                                    >
                                    {# İstersen burada <select> ile şehir listesi yapabilirsin #}
                                </div>

                                <!-- Tarih -->
                                <div class="col-md-3">
                                    <label for="date" class="form-label small text-muted mb-1">Tarih</label>
                                    <input
                                        type="date"
                                        class="form-control"
                                        id="date"
                                        name="date"
                                        value="{{ request.GET.date|default:'' }}"
                                    >
                                </div>

                                <!-- Ara Butonu -->
                                <div class="col-md-1 d-flex align-items-end">
                                    <button type="submit" class="btn btn-primary w-100">
                                        Ara
                                    </button>
                                </div>
                            </div>
                        </form>

                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- KATEGORİ ŞERİTLERİ -->
<section class="py-3 border-bottom bg-white">
    <div class="container">
        <div class="d-flex flex-wrap gap-2">
            {% for kategori in categories %}
                <a href="#"
                   class="btn btn-outline-secondary btn-sm rounded-pill">
                    {{ kategori }}
                </a>
            {% empty %}
                <span class="small text-muted">Kategori bulunamadı.</span>
            {% endfor %}
        </div>
    </div>
</section>


    <!-- POPÜLER / ÖNE ÇIKAN ETKİNLİKLER -->
    <section class="py-5">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="h4 mb-0 fw-bold">Öne Çıkan Etkinlikler</h2>
                <a href="#" class="small text-decoration-none">
                    Tüm etkinlikler →
                </a>
            </div>

            <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-4">
                {% for event in featured_events %}
                    <div class="col">
                        <div class="card h-100 shadow-sm border-0">
                            {% if event.image_url %}
                                <img
                                    src="{{ event.image_url }}"
                                    class="card-img-top"
                                    alt="{{ event.title }}"
                                    style="object-fit: cover; height: 200px;"
                                >
                            {% else %}
                                <div class="bg-secondary bg-opacity-10 d-flex align-items-center justify-content-center"
                                     style="height: 200px;">
                                    <span class="small text-muted">Görsel Yok</span>
                                </div>
                            {% endif %}

                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title mb-1">{{ event.title }}</h5>
                                <p class="card-text small text-muted mb-2">
                                    {{ event.venue }} • {{ event.city }}
                                </p>
                                <p class="card-text small mb-3">
                                    {{ event.date|date:"d F Y, H:i" }}
                                </p>

                                <div class="mt-auto d-flex justify-content-between align-items-center">
                                    <span class="fw-semibold text-primary small">
                                        {{ event.price_display|default:"Fiyat için tıkla" }}
                                    </span>
                                    <a href="{% url 'event_detail' event.slug %}" class="btn btn-sm btn-primary">
                                        Bilet Al
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                {% empty %}
                    <p class="text-muted">
                        Şu anda öne çıkan bir etkinlik bulunmuyor.
                    </p>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}
